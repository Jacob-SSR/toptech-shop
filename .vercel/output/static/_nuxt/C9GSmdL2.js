import{_ as I}from"./B5R9C-37.js";import{g as B,x as U,j as V,y as D,z,c as n,A as $,B as O,r as v,C as F,D as G,E as H,l as q,w as _,o,G as b,a as t,m as C,b as f,s as p,v as K,n as T,d as M,F as Q,k as R,t as l,q as S,H as J}from"#entry";import{a as L}from"./ngrFHoWO.js";import{S as y}from"./NNS-RXd7.js";import{c as j,L as N}from"./B0fRdxuF.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=j("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=j("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=j("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Z=Symbol.for("nuxt:client-only"),tt=B({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(x,{slots:r,attrs:m}){const g=U(!1);V(()=>{g.value=!0});const c=$();return c&&(c._nuxtClientOnly=!0),O(Z,!0),()=>{if(g.value){const u=r.default?.();return u&&u.length===1?[D(u[0],m)]:u}const d=r.fallback||r.placeholder;if(d)return z(d);const h=x.fallback||x.placeholder||"",k=x.fallbackTag||x.placeholderTag||"span";return n(k,m,h)}}}),et={key:0,class:"page-container"},st={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"},at={class:"flex flex-wrap items-center gap-3"},ot={class:"relative"},nt={key:0,class:"flex justify-center items-center py-10 text-gray-500"},lt={key:1,class:"overflow-x-auto shadow-sm border border-gray-200 rounded-lg"},rt={class:"admin-table w-full text-sm"},ct={class:"text-center"},it={class:"p-2 text-center"},dt=["src"],ut={class:"font-medium text-gray-800"},ft={class:"text-gray-600"},mt={class:"capitalize"},ht={key:0,class:"text-xs text-gray-600"},vt={key:1,class:"text-gray-400 text-xs"},yt={key:0,class:"text-xs text-gray-600"},xt={key:1,class:"text-gray-400 text-xs"},gt={class:"font-semibold text-gray-700"},pt={class:"flex flex-col text-center leading-tight"},_t={key:0},bt={key:1,class:"text-gray-500 text-xs"},kt={class:"text-center"},wt={class:"text-center"},Ct={class:"flex flex-col items-center gap-1"},St=["onClick"],Lt={class:"text-center align-middle"},jt={class:"flex justify-center items-center gap-3"},Tt=["onClick"],Mt={key:0},Nt={class:"flex justify-center items-center h-screen"},It=B({__name:"list",setup(x){const r=v([]),m=v(!0),g=v(!1),c=v(""),d=v("all"),h=v("all"),k=async()=>{try{m.value=!0;const a=await L.get("/api/products");r.value=a.data.products||a.data}catch(a){console.error("Error fetching products:",a),y.fire("Error","ไม่สามารถโหลดข้อมูลสินค้าได้","error")}finally{m.value=!1}},u=F(()=>r.value.filter(a=>{const s=a.name.toLowerCase().includes(c.value.toLowerCase())||a.sku.toLowerCase().includes(c.value.toLowerCase())||a.brand.toLowerCase().includes(c.value.toLowerCase()),i=d.value==="all"||a.category===d.value,w=h.value==="all"||a.status===h.value;return s&&i&&w})),A=async a=>{const s=a.status==="active"?"inactive":a.status==="inactive"?"draft":"active";try{await L.put(`/api/products/${a.id}`,{status:s}),a.status=s,y.fire({toast:!0,icon:"success",title:"อัปเดตสถานะสำเร็จ",timer:1500,showConfirmButton:!1})}catch{y.fire("Error","อัปเดตสถานะไม่สำเร็จ","error")}},E=async a=>{if((await y.fire({title:"ลบสินค้า?",text:"คุณต้องการลบสินค้านี้หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ลบ",cancelButtonText:"ยกเลิก"})).isConfirmed)try{await L.delete(`/api/products/${a}`),r.value=r.value.filter(i=>i.id!==a),y.fire("Deleted!","ลบสินค้าเรียบร้อยแล้ว","success")}catch{y.fire("Error","ไม่สามารถลบสินค้าได้","error")}};return V(()=>{const a=G();H(()=>{if(a.value!==null){if(!a.value){J("/admin/login");return}g.value=!0,k()}})}),(a,s)=>{const i=I,w=tt;return o(),q(w,null,{fallback:_(()=>[t("div",Nt,[f(p(N),{class:"w-6 h-6 animate-spin"})])]),default:_(()=>[g.value?(o(),n("div",et,[t("div",st,[s[6]||(s[6]=t("h1",{class:"page-title"},"Product List",-1)),t("div",at,[t("div",ot,[f(p(X),{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),C(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),type:"text",placeholder:"ค้นหาสินค้า",class:"pl-9 pr-3 py-2 border rounded-md focus:ring-2 focus:ring-red-400 outline-none"},null,512),[[K,c.value]])]),C(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),class:"border rounded-md px-3 py-2 focus:ring-2 focus:ring-red-400 outline-none"},[...s[3]||(s[3]=[t("option",{value:"all"},"ทุกหมวดหมู่",-1),t("option",{value:"smartphone"},"Smartphone",-1),t("option",{value:"tablet"},"Tablet",-1),t("option",{value:"notebook"},"Notebook",-1),t("option",{value:"monitor"},"Monitor",-1),t("option",{value:"earpods"},"Earpods",-1),t("option",{value:"desktop"},"Desktop",-1),t("option",{value:"gadget"},"Gadget",-1),t("option",{value:"accessories"},"Accessories",-1),t("option",{value:"console"},"Console",-1)])],512),[[T,d.value]]),C(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>h.value=e),class:"border rounded-md px-3 py-2 focus:ring-2 focus:ring-red-400 outline-none"},[...s[4]||(s[4]=[t("option",{value:"all"},"ทุกสถานะ",-1),t("option",{value:"active"},"แสดงผล",-1),t("option",{value:"inactive"},"ปิดการแสดงผล",-1),t("option",{value:"draft"},"ฉบับร่าง",-1)])],512),[[T,h.value]]),f(i,{to:"/admin/add",class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition"},{default:_(()=>[...s[5]||(s[5]=[M(" Add Product ",-1)])]),_:1})])]),m.value?(o(),n("div",nt,[f(p(N),{class:"w-6 h-6 animate-spin mr-2"}),s[7]||(s[7]=M(" กำลังโหลดข้อมูล... ",-1))])):(o(),n("div",lt,[t("table",rt,[s[9]||(s[9]=t("thead",{class:"bg-gray-100 text-gray-700"},[t("tr",null,[t("th",{class:"w-15 text-center"},"ID"),t("th",{class:"w-20 text-center"},"Image"),t("th",null,"Name"),t("th",null,"SKU"),t("th",null,"Category"),t("th",null,"Brand"),t("th",null,"Color"),t("th",null,"Spec"),t("th",null,"Price (มือ1 / มือ2)"),t("th",null,"Condition"),t("th",null,"Stock"),t("th",null,"Status"),t("th",{class:"text-center w-24"},"Actions")])],-1)),t("tbody",null,[(o(!0),n(Q,null,R(u.value,e=>(o(),n("tr",{key:e.id,class:"hover:bg-gray-50 transition border-b"},[t("td",ct,l(e.id),1),t("td",it,[t("img",{src:e.images?.[0]||e.detailImages?.[0]||"https://placehold.co/80x80?text=No+Image",class:"w-12 h-12 rounded-md border object-cover mx-auto",alt:"Product Image"},null,8,dt)]),t("td",ut,l(e.name),1),t("td",ft,l(e.sku),1),t("td",mt,l(e.category),1),t("td",null,l(e.brand),1),t("td",null,[e.colors?.length?(o(),n("span",ht,l(Array.isArray(e.colors)?e.colors.join(", "):e.colors),1)):(o(),n("span",vt,"-"))]),t("td",null,[e.capacity?.length?(o(),n("span",yt,l(Array.isArray(e.capacity)?e.capacity.join(", "):e.capacity),1)):(o(),n("span",xt,"-"))]),t("td",gt,[t("div",pt,[e.priceNew?(o(),n("span",_t,"มือ1 ฿"+l(e.priceNew.toLocaleString()),1)):b("",!0),e.priceUsed?(o(),n("span",bt," มือ2 ฿"+l(e.priceUsed.toLocaleString()),1)):b("",!0)])]),t("td",null,l(e.condition==="new"?"มือ 1":"มือ 2"),1),t("td",kt,l(e.stock),1),t("td",wt,[t("div",Ct,[t("span",{class:S(["text-xs font-medium",{"text-green-600":e.status==="active","text-gray-500":e.status==="inactive","text-yellow-600":e.status==="draft"}])},l(e.status==="active"?"แสดงผล":e.status==="inactive"?"ปิดการแสดงผล":"ฉบับร่าง"),3),t("button",{onClick:P=>A(e),class:S(["relative w-12 h-6 flex items-center rounded-full transition-all duration-300",{"bg-green-500":e.status==="active","bg-gray-400":e.status==="inactive","bg-yellow-400":e.status==="draft"}])},[t("span",{class:S(["absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-300",{"translate-x-6":e.status==="active","translate-x-3":e.status==="draft","translate-x-0":e.status==="inactive"}])},null,2)],10,St)])]),t("td",Lt,[t("div",jt,[f(i,{to:`/admin/edit/${e.id}`,class:"text-blue-500 hover:text-blue-700 transition",title:"แก้ไข"},{default:_(()=>[f(p(W),{class:"w-5 h-5"})]),_:1},8,["to"]),t("button",{onClick:P=>E(e.id),class:"text-red-500 hover:text-red-700 transition",title:"ลบสินค้า"},[f(p(Y),{class:"w-5 h-5"})],8,Tt)])])]))),128)),u.value.length?b("",!0):(o(),n("tr",Mt,[...s[8]||(s[8]=[t("td",{colspan:"13",class:"text-center text-gray-500 py-6"}," ไม่พบสินค้าที่ตรงกับเงื่อนไข ",-1)])]))])])]))])):b("",!0)]),_:1})}}});export{It as default};
