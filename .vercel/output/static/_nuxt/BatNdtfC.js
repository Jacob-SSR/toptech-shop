import{g as $,r as y,c as n,a as e,m as r,v as u,n as G,p as j,F as c,k as f,q as I,b as p,s as v,o as i,d as N,t as S}from"./Caa50KgB.js";import{a as D}from"./R-lXtGyY.js";import{S as x}from"./NNS-RXd7.js";import{X as k,U as P,C as q}from"./4qUDfLf2.js";import{L as A}from"./BKtbquTb.js";const z={class:"page-container"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},R={class:"space-y-4"},X={class:"grid grid-cols-2 gap-3"},H={class:"flex gap-2 mb-2"},J={class:"flex flex-wrap gap-2"},O={class:"flex gap-2 mb-2"},Q={class:"flex flex-wrap gap-2"},W={class:"space-y-6"},Y={class:"upload-box"},Z=["disabled"],_={class:"preview-grid"},h=["src"],ll=["onClick"],el={class:"detail-box group"},sl={class:"detail-summary flex items-center justify-between"},tl={class:"mt-3 space-y-3"},ol={class:"upload-box"},al=["disabled"],nl={class:"preview-grid"},il=["src"],rl=["onClick"],ul={class:"form-actions"},dl=["disabled"],pl=["disabled"],fl=$({__name:"add",setup(vl){const t=y({name:"",description:"",sku:"",priceNew:0,priceUsed:0,brand:"",category:"",condition:"new",defects:"",percent:null,stock:0,images:[],detailImages:[],colors:[],capacity:[]}),b=y(""),g=y(""),d=y(!1),B=()=>{const o=b.value.trim();o&&!t.value.colors.includes(o)&&(t.value.colors.push(o),b.value="")},E=o=>{t.value.colors.splice(o,1)},M=()=>{const o=g.value.trim();o&&!t.value.capacity.includes(o)&&(t.value.capacity.push(o),g.value="")},F=o=>{t.value.capacity.splice(o,1)},w=async(o,l=!1)=>{const s=o.target.files;if(!s?.length)return;const a=[];d.value=!0;try{for(const m of Array.from(s)){const V=new FormData;V.append("file",m);const T=await D.post("/api/upload",V,{headers:{"Content-Type":"multipart/form-data"}});a.push(T.data.url)}l?t.value.detailImages.push(...a):t.value.images.push(...a)}catch(m){console.error("Upload error:",m),x.fire("Error","อัปโหลดรูปไม่สำเร็จ","error")}finally{d.value=!1}},C=(o,l=!1)=>{l?t.value.detailImages.splice(o,1):t.value.images.splice(o,1)},U=()=>{t.value={name:"",description:"",sku:"",priceNew:0,priceUsed:0,brand:"",category:"",condition:"new",defects:"",percent:null,stock:0,images:[],detailImages:[],colors:[],capacity:[]},b.value="",g.value=""},L=async()=>{try{await D.post("/api/products",t.value),x.fire({icon:"success",title:"เพิ่มสินค้าเรียบร้อย",timer:2e3,showConfirmButton:!1}),U()}catch(o){console.error(o),x.fire("Error","ไม่สามารถบันทึกข้อมูลได้","error")}};return(o,l)=>(i(),n("div",z,[l[35]||(l[35]=e("h1",{class:"page-title"},"Add Product",-1)),e("div",K,[e("div",R,[e("div",null,[l[14]||(l[14]=e("label",{class:"label"},"Product Name*",-1)),r(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.name=s),class:"input",type:"text"},null,512),[[u,t.value.name]])]),e("div",null,[l[15]||(l[15]=e("label",{class:"label"},"Description",-1)),r(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.description=s),class:"input"},null,512),[[u,t.value.description]])]),e("div",null,[l[16]||(l[16]=e("label",{class:"label"},"SKU*",-1)),r(e("input",{"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.sku=s),class:"input",type:"text"},null,512),[[u,t.value.sku]])]),e("div",X,[e("div",null,[l[17]||(l[17]=e("label",{class:"label"},"Price มือ 1*",-1)),r(e("input",{"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.priceNew=s),class:"input",type:"number"},null,512),[[u,t.value.priceNew,void 0,{number:!0}]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"label"},"Price มือ 2",-1)),r(e("input",{"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.priceUsed=s),class:"input",type:"number"},null,512),[[u,t.value.priceUsed,void 0,{number:!0}]])])]),e("div",null,[l[19]||(l[19]=e("label",{class:"label"},"Brand*",-1)),r(e("input",{"onUpdate:modelValue":l[5]||(l[5]=s=>t.value.brand=s),class:"input",type:"text"},null,512),[[u,t.value.brand]])]),e("div",null,[l[21]||(l[21]=e("label",{class:"label"},"Category*",-1)),r(e("select",{"onUpdate:modelValue":l[6]||(l[6]=s=>t.value.category=s),class:"input"},[...l[20]||(l[20]=[j('<option disabled value="">-- เลือกหมวดหมู่ --</option><option value="smartphone">Smartphone</option><option value="tablet">Tablet</option><option value="notebook">Notebook</option><option value="monitor">Monitor</option><option value="earpods">Earpods</option><option value="desktop">Desktop</option><option value="gadget">Gadget</option><option value="accessories">Accessories</option><option value="console">Console</option>',10)])],512),[[G,t.value.category]])]),e("div",null,[l[22]||(l[22]=e("label",{class:"label"},"สีสินค้า",-1)),e("div",H,[r(e("input",{"onUpdate:modelValue":l[7]||(l[7]=s=>b.value=s),class:"input flex-1",placeholder:"เพิ่มสีใหม่..."},null,512),[[u,b.value]]),e("button",{type:"button",onClick:B,class:"px-3 py-2 bg-red-500 text-white rounded"}," เพิ่ม ")]),e("div",J,[(i(!0),n(c,null,f(t.value.colors,(s,a)=>(i(),n("span",{key:a,class:"bg-gray-200 px-2 py-1 rounded text-sm flex items-center"},[N(S(s)+" ",1),p(v(k),{class:"ml-1 w-3 h-3 text-red-500 cursor-pointer",onClick:m=>E(a)},null,8,["onClick"])]))),128))])]),e("div",null,[l[23]||(l[23]=e("label",{class:"label"},"สเปก (RAM / ความจุ)",-1)),e("div",O,[r(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>g.value=s),class:"input flex-1",placeholder:"เช่น 8/256GB"},null,512),[[u,g.value]]),e("button",{type:"button",onClick:M,class:"px-3 py-2 bg-red-500 text-white rounded"}," เพิ่ม ")]),e("div",Q,[(i(!0),n(c,null,f(t.value.capacity,(s,a)=>(i(),n("span",{key:a,class:"bg-gray-200 px-2 py-1 rounded text-sm flex items-center"},[N(S(s)+" ",1),p(v(k),{class:"ml-1 w-3 h-3 text-red-500 cursor-pointer",onClick:m=>F(a)},null,8,["onClick"])]))),128))])]),e("div",null,[l[24]||(l[24]=e("label",{class:"label"},"Stock*",-1)),r(e("input",{"onUpdate:modelValue":l[9]||(l[9]=s=>t.value.stock=s),class:"input",type:"number"},null,512),[[u,t.value.stock,void 0,{number:!0}]])])]),e("div",W,[e("div",null,[l[27]||(l[27]=e("label",{class:"label"},"Product Images มือ 1 (Max 4)",-1)),e("div",Y,[e("label",{class:I(["upload-btn",{"opacity-60 cursor-not-allowed":d.value}])},[e("input",{type:"file",multiple:"",class:"hidden",onChange:l[10]||(l[10]=s=>w(s,!1)),disabled:d.value},null,40,Z),d.value?(i(),n(c,{key:0},[p(v(A),{class:"icon animate-spin"}),l[25]||(l[25]=e("span",null,"Uploading...",-1))],64)):(i(),n(c,{key:1},[p(v(P),{class:"icon"}),l[26]||(l[26]=e("span",null,"Upload Images",-1))],64))],2)]),e("div",_,[(i(!0),n(c,null,f(t.value.images,(s,a)=>(i(),n("div",{key:a,class:"relative group"},[e("img",{src:s,class:"preview-img"},null,8,h),e("button",{onClick:m=>C(a,!1),class:"remove-btn",title:"ลบรูปนี้"},[p(v(k),{class:"w-4 h-4"})],8,ll)]))),128))])]),e("div",null,[l[34]||(l[34]=e("label",{class:"label"},"รายละเอียดเฉพาะมือ 2",-1)),e("details",el,[e("summary",sl,[l[28]||(l[28]=e("span",null,"รายละเอียดเพิ่มเติม",-1)),p(v(q),{class:"w-4 h-4 text-gray-600 transition-transform duration-300 group-open:rotate-180"})]),e("div",tl,[e("div",null,[l[31]||(l[31]=e("label",{class:"label"},"Product Images มือ 2 (Max 4)",-1)),e("div",ol,[e("label",{class:I(["upload-btn",{"opacity-60 cursor-not-allowed":d.value}])},[e("input",{type:"file",multiple:"",class:"hidden",onChange:l[11]||(l[11]=s=>w(s,!0)),disabled:d.value},null,40,al),d.value?(i(),n(c,{key:0},[p(v(A),{class:"icon animate-spin"}),l[29]||(l[29]=e("span",null,"Uploading...",-1))],64)):(i(),n(c,{key:1},[p(v(P),{class:"icon"}),l[30]||(l[30]=e("span",null,"Upload Images",-1))],64))],2)]),e("div",nl,[(i(!0),n(c,null,f(t.value.detailImages,(s,a)=>(i(),n("div",{key:a,class:"relative group"},[e("img",{src:s,class:"preview-img"},null,8,il),e("button",{onClick:m=>C(a,!0),class:"remove-btn",title:"ลบรูปนี้"},[p(v(k),{class:"w-4 h-4"})],8,rl)]))),128))])]),e("div",null,[l[32]||(l[32]=e("label",{class:"label"},"คุณภาพสินค้า (%)",-1)),r(e("input",{"onUpdate:modelValue":l[12]||(l[12]=s=>t.value.percent=s),class:"input",type:"number"},null,512),[[u,t.value.percent]])]),e("div",null,[l[33]||(l[33]=e("label",{class:"label"},"รายละเอียดของตำหนิ (ถ้ามี)",-1)),r(e("textarea",{"onUpdate:modelValue":l[13]||(l[13]=s=>t.value.defects=s),class:"input"},null,512),[[u,t.value.defects]])])])])])])]),e("div",ul,[e("button",{class:"btn-primary",onClick:L,disabled:d.value}," SAVE ",8,dl),e("button",{class:"btn-secondary",onClick:U,disabled:d.value}," CANCEL ",8,pl)])]))}});export{fl as default};
