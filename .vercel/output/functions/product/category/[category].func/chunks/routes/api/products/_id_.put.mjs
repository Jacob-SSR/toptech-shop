import{d as e,g as r,r as t,c as i}from"../../../_/nitro.mjs";import{p as o}from"../../../_/prisma.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@prisma/client";function toStringArray(e){if(Array.isArray(e))return e.filter(Boolean);if("string"==typeof e&&e.trim())try{return JSON.parse(e)}catch{return[e]}return[]}const a=e(async e=>{var a,n,s;try{const i=Number(r(e,"id")),c=await t(e),d={};null!=c.sku&&(d.sku=c.sku),null!=c.name&&(d.name=c.name),null!=c.brand&&(d.brand=c.brand),null!=c.category&&(d.category=c.category),void 0!==c.priceNew&&(d.priceNew=c.priceNew?Number(c.priceNew):null),void 0!==c.priceUsed&&(d.priceUsed=c.priceUsed?Number(c.priceUsed):null),void 0!==c.basePrice&&(d.basePrice=c.basePrice?Number(c.basePrice):null),void 0!==c.offerPrice&&(d.offerPrice=c.offerPrice?Number(c.offerPrice):null),null!=c.condition&&(d.condition=c.condition),void 0!==c.percent&&(d.percent=c.percent?Number(c.percent):null),void 0!==c.defects&&(d.defects=null!=(a=c.defects)?a:null),void 0!==c.description&&(d.description=null!=(n=c.description)?n:null),void 0!==c.images&&(d.images=toStringArray(c.images)),void 0!==c.detailImages&&(d.detailImages=toStringArray(c.detailImages)),void 0!==c.colors&&(d.colors=toStringArray(c.colors)),void 0!==c.capacity&&(d.capacity=toStringArray(c.capacity)),null!=c.stock&&(d.stock=Number(c.stock)),void 0!==c.isFeatured&&(d.isFeatured=!!c.isFeatured),null!=c.status&&(d.status=c.status),void 0!==c.adminName&&(d.adminName=null!=(s=c.adminName)?s:null);return{success:!0,product:await o.product.update({where:{id:i},data:d})}}catch(e){throw i({statusCode:500,statusMessage:"Failed to update product"})}});export{a as default};
//# sourceMappingURL=_id_.put.mjs.map
