import{d as r,r as e,c as t}from"../../_/nitro.mjs";import{p as a}from"../../_/prisma.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@prisma/client";function toStringArray(r){if(Array.isArray(r))return r.filter(Boolean);if("string"==typeof r&&r.trim())try{return JSON.parse(r)}catch{return[r]}return[]}const i=r(async r=>{var i,o;try{const t=await e(r),n=toStringArray(t.images),s=toStringArray(t.detailImages),c=toStringArray(t.colors),p=toStringArray(t.capacity);return{success:!0,product:await a.product.create({data:{sku:t.sku,name:t.name,brand:t.brand,category:t.category,priceNew:t.priceNew?Number(t.priceNew):null,priceUsed:t.priceUsed?Number(t.priceUsed):null,basePrice:t.basePrice?Number(t.basePrice):null,offerPrice:t.offerPrice?Number(t.offerPrice):null,condition:t.condition||"new",percent:t.percent?Number(t.percent):null,defects:t.defects||null,description:t.description||null,images:n,detailImages:s,colors:c,capacity:p,stock:Number(t.stock)||0,isFeatured:!!t.isFeatured,status:null!=(i=t.status)?i:"active",adminName:null!=(o=t.adminName)?o:null}})}}catch(r){throw t({statusCode:500,statusMessage:"Failed to create product"})}});export{i as default};
//# sourceMappingURL=index.post.mjs.map
