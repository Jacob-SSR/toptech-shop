import{createRenderer as e,getRequestDependencies as t,getPreloadLinks as n,getPrefetchLinks as s}from"file://D:/workshop/FullStack/toptech_shop/node_modules/vue-bundle-renderer/dist/runtime.mjs";import{j as o,a as r,b as a,e as i,c as l,f as d,h as u,i as c,u as p,k as h,l as f}from"../_/nitro.mjs";import{renderToString as m}from"file://D:/workshop/FullStack/toptech_shop/node_modules/vue/server-renderer/index.mjs";import{createHead as b,propsToString as g,renderSSRHead as y}from"file://D:/workshop/FullStack/toptech_shop/node_modules/unhead/dist/server.mjs";import{stringify as w,uneval as _}from"file://D:/workshop/FullStack/toptech_shop/node_modules/devalue/index.js";import{walkResolver as v}from"file://D:/workshop/FullStack/toptech_shop/node_modules/unhead/dist/utils.mjs";import{toValue as j,isRef as R,hasInjectionContext as A,inject as x,ref as S,watchEffect as k,getCurrentInstance as C,onBeforeUnmount as T,onDeactivated as L,onActivated as U}from"file://D:/workshop/FullStack/toptech_shop/node_modules/vue/index.mjs";const VueResolver=(e,t)=>R(t)?j(t):t,$="usehead";function injectHead(){if(A()){const e=x($);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function useHead(e,t={}){const n=t.head||injectHead();return n.ssr?n.push(e||{},t):function(e,t,n={}){const s=S(!1);let o;k(()=>{const r=s.value?{}:v(t,VueResolver);o?o.patch(r):o=e.push(r,n)});C()&&(T(()=>{o.dispose()}),L(()=>{s.value=!0}),U(()=>{s.value=!1}));return o}(n,e,t)}function createHead(e={}){const t=b({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide($,e)}}.install}(t),t}const H={meta:[{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"utf-8"}],link:[],style:[],script:[],noscript:[],charset:"utf-8",viewport:"width=device-width, initial-scale=1",title:"TopTech Admin"},P={id:"teleports"},z={id:"__nuxt-loader"};function baseURL(){return r().app.baseURL}function buildAssetsURL(...e){return o(publicAssetsURL(),r().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=r().app,n=t.cdnURL||t.baseURL;return e.length?o(n,...e):n}const F=`<div${g({id:"__nuxt"})}>`,O="</div>",getClientManifest=()=>import("../build/client.manifest.mjs").then(e=>e.default||e).then(e=>"function"==typeof e?e():e),D=lazyCachedFunction(async()=>{const t=await getClientManifest();if(!t)throw new Error("client.manifest is not available");const n=await import("../build/server.mjs").then(e=>e.default||e);if(!n)throw new Error("Server bundle is not available");return e(n,{manifest:t,renderToString:async function(e,t){const n=await m(e,t);return F+n+O},buildAssetsURL:buildAssetsURL})}),M=lazyCachedFunction(async()=>{const t=await getClientManifest(),n=await import("../virtual/_virtual_spa-template.mjs").then(e=>e.template).catch(()=>"").then(e=>{{const t=`<div${g(z)}>`;return F+O+(e?t+e+"</div>":"")}}),s=e(()=>()=>{},{manifest:t,renderToString:()=>n,buildAssetsURL:buildAssetsURL}),o=await s.renderToString({});return{rendererContext:s.rendererContext,renderToString:e=>{const t=r(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(o)}}});function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw t=null,e})),t)}const N=lazyCachedFunction(()=>import("../build/styles.mjs").then(e=>e.default||e));function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?w(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${_(e.ssrContext.config)}`}]}const E={disableDefaults:!0};const I={omitLineBreaks:!0},J=/^[A-Za-z]:\//;const X=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,Z=/^\/([A-Za-z]:)?$/;function cwd(){return"undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd().replace(/\\/g,"/"):"/"}const resolve=function(...e){let t="",n=!1;for(let s=(e=e.map(e=>function(e=""){return e?e.replace(/\\/g,"/").replace(J,e=>e.toUpperCase()):e}(e))).length-1;s>=-1&&!n;s--){const o=s>=0?e[s]:cwd();o&&0!==o.length&&(t=`${o}/${t}`,n=isAbsolute(o))}return t=function(e,t){let n="",s=0,o=-1,r=0,a=null;for(let i=0;i<=e.length;++i){if(i<e.length)a=e[i];else{if("/"===a)break;a="/"}if("/"===a){if(o===i-1||1===r);else if(2===r){if(n.length<2||2!==s||"."!==n[n.length-1]||"."!==n[n.length-2]){if(n.length>2){const e=n.lastIndexOf("/");-1===e?(n="",s=0):(n=n.slice(0,e),s=n.length-1-n.lastIndexOf("/")),o=i,r=0;continue}if(n.length>0){n="",s=0,o=i,r=0;continue}}t&&(n+=n.length>0?"/..":"..",s=2)}else n.length>0?n+=`/${e.slice(o+1,i)}`:n=e.slice(o+1,i),s=i-o-1;o=i,r=0}else"."===a&&-1!==r?++r:r=-1}return n}(t,!n),n&&!isAbsolute(t)?`/${t}`:t.length>0?t:"."};const isAbsolute=function(e){return X.test(e)};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;const Y=!!P.id,q=Y?`<div${g(P)}>`:"",B=Y?"</div>":"";let W;const G=a(async e=>{const o=p(),a=e.path.startsWith("/__nuxt_error")?i(e):null;if(a&&!("__unenv__"in e.node.req))throw l({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const m=function(e){return{url:e.path,event:e,runtimeConfig:r(e),noSSR:e.context.nuxt?.noSSR||!1,head:createHead(E),error:!1,nuxt:void 0,payload:{},_payloadReducers:Object.create(null),modules:new Set}}(e),b={mode:"server"};if(m.head.push(H,b),a){if(a.statusCode&&=Number.parseInt(a.statusCode),"string"==typeof a.data)try{a.data=d(a.data)}catch{}!function(e,t){e.error=!0,e.payload={error:t},e.url=t.url}(m,a)}const g=u(e);!1===g.ssr&&(m.noSSR=!0);const w=await function(e){return e.noSSR?M():D()}(m);for(const e of await getClientManifest().then(e=>{const t=[];for(const n of Object.values(e))n._globalCSS&&t.push(n.src);return t}))m.modules.add(e);const _=await w.renderToString(m).catch(async e=>{if(m._renderResponse&&"skipping render"===e.message)return{};const t=!a&&m.payload?.error||e;throw await(m.nuxt?.hooks.callHook("app:error",t)),t}),v=m._renderResponse?[]:await async function(e){const t=await N(),n=new Set;for(const s of e)if(s in t&&t[s])for(const e of await t[s]())n.add(e);return Array.from(n).map(e=>({innerHTML:e}))}(m.modules??[]);if(await(m.nuxt?.hooks.callHook("app:rendered",{ssrContext:m,renderResult:_})),m._renderResponse)return m._renderResponse;if(m.payload?.error&&!a)throw m.payload.error;const j=g.noScripts,{styles:R,scripts:A}=t(m,w.rendererContext);if(!j){let t=W;t||(t=buildAssetsURL("CNYevI37.js"),m.runtimeConfig.app.cdnURL||/^(?:\/|\.+\/)/.test(t)?W=t:(t=function(e,t){const n=resolve(e).replace(Z,"$1").split("/"),s=resolve(t).replace(Z,"$1").split("/");if(":"===s[0][1]&&":"===n[0][1]&&n[0]!==s[0])return s.join("/");const o=[...n];for(const e of o){if(s[0]!==e)break;n.shift(),s.shift()}return[...n.map(()=>".."),...s].join("/")}(e.path.replace(/\/[^/]+$/,"/"),c("/",t)),/^(?:\/|\.+\/)/.test(t)||(t=`./${t}`))),m.head.push({script:[{tagPosition:"head",tagPriority:-2,type:"importmap",innerHTML:JSON.stringify({imports:{"#entry":t}})}]},b)}m._preloadManifest&&!j&&m.head.push({link:[{rel:"preload",as:"fetch",fetchpriority:"low",crossorigin:"anonymous",href:buildAssetsURL(`builds/meta/${m.runtimeConfig.app.buildId}.json`)}]},{...b,tagPriority:"low"}),v.length&&m.head.push({style:v});const x=[];for(const e of Object.values(R))x.push({rel:"stylesheet",href:w.rendererContext.buildAssetsURL(e.file),crossorigin:""});if(x.length&&m.head.push({link:x},b),j||(m.head.push({link:n(m,w.rendererContext)},b),m.head.push({link:s(m,w.rendererContext)},b),m.head.push({script:renderPayloadJsonScript({ssrContext:m,data:m.payload})},{...b,tagPosition:"bodyClose",tagPriority:"high"})),!g.noScripts){const e="head";m.head.push({script:Object.values(A).map(t=>({type:t.module?"module":null,src:w.rendererContext.buildAssetsURL(t.file),defer:!t.module||null,tagPosition:e,crossorigin:""}))},b)}const{headTags:S,bodyTags:k,bodyTagsOpen:C,htmlAttrs:T,bodyAttrs:L}=await y(m.head,I),U={htmlAttrs:T?[T]:[],head:normalizeChunks([S]),bodyAttrs:L?[L]:[],bodyPrepend:normalizeChunks([C,m.teleports?.body]),body:[_.html,q+(Y?joinTags([m.teleports?.[`#${P.id}`]]):"")+B],bodyAppend:[k]};return await o.hooks.callHook("render:html",U,{event:e}),{body:($=U,`<!DOCTYPE html><html${joinAttrs($.htmlAttrs)}><head>${joinTags($.head)}</head><body${joinAttrs($.bodyAttrs)}>${joinTags($.bodyPrepend)}${joinTags($.body)}${joinTags($.bodyAppend)}</body></html>`),statusCode:f(e),statusMessage:h(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}};var $});function normalizeChunks(e){const t=[];for(const n of e){const e=n?.trim();e&&t.push(e)}return t}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const K=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{baseURL as b,$ as h,publicAssetsURL as p,K as r,useHead as u};
//# sourceMappingURL=renderer.mjs.map
